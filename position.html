<html>
<head>
    <title>Find Players by Position</title>
    <link type="text/css" rel="stylesheet" href="search.css" >
</head>

<nav>
    <ul id = nav>
        <li id = navi><a href = "index.html">Home</a></li>
        <li id = navi><a href = "search.html">Search</a></li>
        <li id = navi><a href = "page1.html">1</a></li>
        <li id = navi><a href = "position.html">Players by Position</a></li>
        
    </ul>
</nav>

    
    
    <body>

        <div id = "list">
        <label>Enter Position (Ex: G, F, C) </label><br>
        <input type = "text" id = "myText" ><br>
        <button type = "button" id = "myButton">submit</button>
        
        <ul 
        id = "players">      
        </ul>
        </div>
        </body>
        </html>
        <script>
      document.getElementById("myButton").onclick = function(){
        var page = 1;
        var position = document.getElementById("myText").value; // get city from submission
          

        var ul = document.getElementById("players");  //clear previous list
        ul.innerHTML = "";

     
        while(page<50 ){ // amount of pages
            
            fetch("https://www.balldontlie.io/api/v1/players/?page="+page)//input specific link for data, iterating page
            .then(res  => {
             return res.json();
         })
            .then(info => {
              

              info.data.forEach(element => { //accesses data array which contains the players
              if(element.position == position){ //returns players whos team matches entry
              const markup = `<li>${element.first_name + " " + element.last_name + " "+element.position+ " " +element.team.full_name}</li>`;  // these two lines put the data in the unordered list above
              document.querySelector('#players').insertAdjacentHTML('beforeend', markup);
            }
            });
        
             console.log(info.data)
            console.log(info.meta.next_page)
        });
        page = page +1;
        console.log(page)
        
        }

            
    }
        

        </script>
<html>
<head>
    <title>Find Players by Weight</title>
    <link type="text/css" rel="stylesheet" href="search.css" >
</head>

<nav>
    <ul id = nav>
        <li id = navi><a href = "index.html">Home</a></li>
        <li id = navi><a href = "search.html">Search</a></li>
        <li id = navi><a href = "page1.html">1</a></li>
        <li id = navi><a href = "weights.html">Player Weights</a></li>
        
    </ul>
</nav>

    
    
    <body>

        <div id = "list">
        <label>Enter Weight </label><br>
        <input type = "number" id = "myNum" ><br>
        <button type = "button" id = "myButton">submit</button>
        
        <ul 
        id = "players">      
        </ul>
        </div>
        </body>
        </html>
        <script>
        
            document.getElementById("myButton").onclick = function(){
                var page = 1;
                var weight = document.getElementById("myNum").value; // get player name from submission
                  
        
                var ul = document.getElementById("players");  //clear previous list
                ul.innerHTML = "";
        
                while(page<20){ // amount of pages
                    
                    fetch("https://www.balldontlie.io/api/v1/players/?page="+page)//input specific link for data, iterating page
                    .then(res  => {
                     return res.json();
                 })
                    .then(info => {
                      
        
                      info.data.forEach(element => { //accesses data array which contains the players
                      if(element.data.weight_pounds == weight){ //returns search if weight has nba players listed at that weight
                      const markup = `<li>${element.first_name + " " + element.last_name}<li>`;  // these two lines put the data above into a list
                      document.querySelector('#players').insertAdjacentHTML('beforeend', markup);
                    }
                    });
                
                     console.log(info.data)
                    console.log(info.meta.next_page)
                });
                page = page +1;
                console.log(page)

                }       
            }
        </script>